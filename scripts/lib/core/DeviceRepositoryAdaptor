
function DeviceRepositoryAdaptor() {

  	this.save = function(model) {
      logger.debug("DeviceRepositoryAdaptor - saving device: " + model.id)
      model["apsdb.update"]= "true"
      model.password = "!@#$%^&*"

      // Save device to device database
      var response = apsdb.callApi("SaveDevice", model, null)
      return response.metadata.status != 'failure' 
    }
  
  	this.load = function(id) {
      logger.debug("DeviceRepositoryAdaptor - loading device: " + id)

      // Load device by id from device database
      var response = apsdb.callApi("GetDevice", {
        id: id
      }, null)
      if (response.metadata.status == 'failure') {
        return null
      } else {
        return response.result.device
      }
    }
}